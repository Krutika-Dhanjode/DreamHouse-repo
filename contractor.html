<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="contractor.css" />
    <script
      src="https://kit.fontawesome.com/012112a406.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet"
 href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  </head>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".card-image").forEach((slider) => {
        const slides = slider.querySelectorAll(".slide");
        const prev = slider.querySelector(".left");
        const next = slider.querySelector(".right");

        if (slides.length === 0) return; // safety check

        let index = 0;

        function showSlide(i) {
          slides.forEach((slide) => slide.classList.remove("active"));
          slides[i].classList.add("active");
        }

        next.addEventListener("click", () => {
          index = (index + 1) % slides.length;
          showSlide(index);
        });

        prev.addEventListener("click", () => {
          index = (index - 1 + slides.length) % slides.length;
          showSlide(index);
        });
      });
    });
  </script>

  <body>
    <nav class="navbar">
      <div class="nav-logo" style="display: flex">
        <!-- <img src="117-.png" style="height: 80px ;padding-left: 7px;" alt="House Project" /> -->
        <a href="index.html">
          <img
            src="h1.png"
            style="height: 75px; padding-left: 7px"
            alt="House Project"
        /></a>
      </div>

      <ul class="nav-links">
        <li class="nav-item">
          <a href="photo.html" class="nav-link"
            >Photos<i class="fa-solid fa-angle-down"></i
          ></a>
        </li>

        <li class="nav-item">
          <a href="#" class="nav-link"
            >Find Professionals<i class="fa-solid fa-angle-down"></i
          ></a>
          <div class="dropdown-menu">
            <div class="dropdown-column">
              <h1 style="font-size: large; color: rgb(211, 152, 41)">
                Select Profession
              </h1>
              <a href="contractor.html">Contrators and Builders</a>
              <a href="archi.html">Architect</a>
              <a href="inter.html">Interial Designers</a>
              <a href="mat.html">Materials shop</a>
              <a href="#">Paint</a>
              <a href="#">Lightings</a>
              <a href="#">Gardening</a>
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a href="custom.html" class="nav-link"
            >Customize packages<i class="fa-solid fa-angle-down"></i
          ></a>
          <div class="dropdown-menu">
            <div class="dropdown-column">
              <h1 style="font-size: large; color: rgb(211, 152, 41)">
                Contact our expert
              </h1>
            </div>
          </div>
        </li>
      </ul>
      <div class="search-bar" style="margin-left: auto">
        <input type="text" placeholder="Search‚Ä¶" />
        <button aria-label="Search">üîç</button>
      </div>

      <div class="auth-buttons" id="authButtons">
        <button class="btn signup">
          <a
            href="signup.html"
            onclick="loginSuccess()"
            style="color: aliceblue; font-weight: 200px"
            >Sign Up</a
          >
        </button>
        <button class="btn signin">
          <a
            href="signin.html"
            onclick="loginSuccess()"
            style="color: aliceblue; font-weight: 200px"
            >Sign In</a
          >
        </button>
      </div>

      <div class="ico" id="userIcons" style="display: none; gap: 10px">
        <i class="fa-regular fa-message"></i>
        <i class="fa-solid fa-heart" style="color: rgb(213, 42, 102)"></i>
        <i class="fa-regular fa-user"></i>
      </div>
    </nav>
    <div class="page-container">
      <aside class="sidebar">
        <div class="filter-group">
          <h3 style="color: #1c7188; font-size: 20px">
            <i class="fa-solid fa-location-crosshairs"></i> Location
          </h3>
          <div class="bottom-bar">
            <select id="citySelect" onchange="loadCity()">
              <option value="">Select City</option>
              <option value="18.5204,73.8567">Pune</option>
              <option value="19.0760,72.8777">Mumbai</option>
              <option value="16.8544,74.5642">Sangli</option>
            </select>
          </div>
          

          <!-- <button
            class="ll"
            style="
              padding: 6px;
              border: none;
              margin-top: 8px;
              margin-right: 16px;
              font-size: 17px;
            "
          >
            Search
          </button> -->
          <!-- <h3 style="color: #1c7188; font-size: 20px; padding-top: 20px">
            <i class="fa-solid fa-location-crosshairs"></i> PinCode
          </h3>
          <input
            type="text"
            style="
              background-color: #c0ece9;
              height: 28px;
              padding: 6px;
              border: none;
              margin-top: 8px;
              margin-right: 16px;
              font-size: 17px;
            "
            placeholder="Enter Pincode"
          />
          <button
            class="ll"
            style="
              padding: 6px;
              border: none;
              margin-top: 8px;
              margin-right: 16px;
              font-size: 17px;
            "
          >
            Search
          </button> -->
        </div>

        <div class="filter-group">
          <h3
            style="
              color: #1c7188;
              font-size: 20px;
              padding: 20px;
              padding-left: 2px;
            "
          >
            <i class="fa-solid fa-user-tie" style="padding-right: 1px"></i
            >Professional Category
          </h3>
          <div class="category-list">
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='index.html'"
              />
              <a
                href="index.html"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Contractors and Builders
              </a>
            </label>
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='archi.html'"
              />
              <a
                href="archi.html"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Architect
              </a>
            </label>
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='inter.html'"
              />
              <a
                href="inter.html"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Interial Designer
              </a>
            </label>
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='mat.html'"
              />
              <a
                href="mat.html"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Material Shop
              </a>
            </label>
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='archi.html'"
              />
              <a
                href="archi.html"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Paint
              </a>
            </label>
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='archi.html'"
              />
              <a
                href="archi.html"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Electronics items
              </a>
            </label>

            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='#'"
              />
              <a
                href="#"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Lightings
              </a>
            </label>
            <label>
              <input
                type="radio"
                name="cat"
                onchange="window.location.href='#'"
              />
              <a
                href="#"
                onclick="this.previousElementSibling.checked = true;"
                style="color: inherit; text-decoration: none"
              >
                Gardening
              </a>
            </label>
          </div>
        </div>
      </aside>
      <div class="k">
        <main class="listings-container">
          <div id="map"></div>
          

          <div class="listing-card">
            <div class="card-image">
              <img src="111.jpg" class="slide active" />
              <img src="112.jpg" class="slide" />
              <img src="i1.jpeg" class="slide" />
              <button class="arrow left">&#10094;</button>
              <button class="arrow right">&#10095;</button>
            </div>
            <div class="card-details">
              <div class="header-row">
                <div class="firm-info">
                  <h2>BuildTech Contrator</h2>
                  <span class="rating">‚≠ê 4.9 (110 Reviews)</span>
                </div>
                <div class="hy">
                  <a href="profile.html"
                    ><button class="msg-btne">Check Profile</button></a
                  >
                  <button class="msg-btn">‚úâ Send Message</button>
                </div>
              </div>
              <p class="description">
                BuildTech provides a comprehensive range of services...
                <a href="#">Read More</a>
              </p>
              <p class="address">
                üìç 402-E, 6th Street, Coimbatore, Tamil Nadu
              </p>
            </div>
          </div>
        </main>
        <main class="listings-container">
          <div class="listing-card">
            <div class="card-image">
              <div class="card-image">
                <img src="f1.jpg" class="slide active" />
                <img src="f2.jpg" class="slide" />
                <img src="f3.jpg" class="slide" />
                <button class="arrow left">&#10094;</button>
                <button class="arrow right">&#10095;</button>
              </div>
              <img src="114.jpeg" alt="House Project" />
            </div>
            <div class="card-details">
              <div class="header-row">
                <div class="firm-info">
                  <h2>Ragini Builders</h2>
                  <span class="rating">‚≠ê 4.9 (110 Reviews)</span>
                </div>
                <div class="hy">
                  <button class="msg-btne">Check Profile</button>

                  <button class="msg-btn">‚úâ Send Message</button>
                </div>
              </div>
              <p class="description">
                BuildTech provides a comprehensive range of services...
                <a href="#">Read More</a>
              </p>
              <p class="address">
                üìç 402-E, 6th Street, Coimbatore, Tamil Nadu
              </p>
            </div>
          </div>
        </main>
        <main class="listings-container">
          <div class="listing-card">
            <div class="card-image">
              <div class="card-image">
                <img src="r1.jpg" class="slide active" />
                <img src="r3.jpg" class="slide" />
                <img src="r2.png" class="slide" />
                <button class="arrow left">&#10094;</button>
                <button class="arrow right">&#10095;</button>
              </div>
            </div>
            <div class="card-details">
              <div class="header-row">
                <div class="firm-info">
                  <h2>BuildHouse rawhouse builders</h2>
                  <span class="rating">‚≠ê 4.9 (110 Reviews)</span>
                </div>
                <div class="hy">
                  <button class="msg-btne">Check Profile</button>
                  <button class="msg-btn">‚úâ Send Message</button>
                </div>
              </div>
              <p class="description">
                BuildTech provides a comprehensive range of services...
                <a href="#">Read More</a>
              </p>
              <p class="address">
                üìç 402-E, 6th Street, Coimbatore, Tamil Nadu
              </p>
            </div>
          </div>
          <main class="listings-container">
            <div class="listing-card">
              <div class="card-image">
                <div class="card-image">
                  <img src="m1.jpeg" class="slide active" />
                  <img src="m2.jpg" class="slide" />
                  <img src="m3.jng" class="slide" />
                  <button class="arrow left">&#10094;</button>
                  <button class="arrow right">&#10095;</button>
                </div>
              </div>
              <div class="card-details">
                <div class="header-row">
                  <div class="firm-info">
                    <h2>Amit mall builders</h2>
                    <span class="rating">‚≠ê 4.9 (110 Reviews)</span>
                  </div>
                  <div class="hy">
                    <button class="msg-btne">Check Profile</button>
                    <button class="msg-btn">‚úâ Send Message</button>
                  </div>
                </div>
                <p class="description">
                  BuildTech provides a comprehensive range of services...
                  <a href="#">Read More</a>
                </p>
                <p class="address">
                  üìç 402-E, 6th Street, Coimbatore, Tamil Nadu
                </p>
              </div>
            </div>
          </main>
        </main>
      </div>
    </div>
    <script src="main.js"></script>
    <script>
      /* ================= MAP INIT ================= */
      const map = L.map("map").setView([20.5937, 78.9629], 5);
      console.log("Map script running");

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "¬© OpenStreetMap",
      }).addTo(map);

      /* ================= DUMMY SERVICE PROVIDERS ================= */
      const services = [
        // Pune
        { name: "Sharma Cement", lat: 18.524, lng: 73.85 },
        { name: "A1 Plumbing", lat: 18.515, lng: 73.865 },

        // Mumbai
        { name: "Mumbai Builders", lat: 19.076, lng: 72.877 },
        { name: "Power Electric", lat: 19.07, lng: 72.87 },

        // Sangli
        { name: "Sangli Builders", lat: 16.8544, lng: 74.5642 },
        { name: "Patil Cement Depot", lat: 16.86, lng: 74.56 },
      ];

      /* ================= ICONS ================= */
      const cityIcon = L.icon({
        iconUrl: "https://maps.gstatic.com/mapfiles/ms2/micons/blue-dot.png",
        iconSize: [32, 32],
      });

      const serviceIcon = L.icon({
        iconUrl: "https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png",
        iconSize: [32, 32],
      });

      /* ================= LOGIC ================= */
      let markers = [];
      let cityMarker;
      const RADIUS_KM = 20;

      function loadCity() {
        const val = citySelect.value;
        if (!val) return;

        const [clat, clng] = val.split(",").map(Number);

        map.setView([clat, clng], 12);

        // Clear old markers
        markers.forEach((m) => map.removeLayer(m));
        markers = [];
        if (cityMarker) map.removeLayer(cityMarker);

        // City marker
        cityMarker = L.marker([clat, clng], { icon: cityIcon })
          .addTo(map)
          .bindPopup("Selected City")
          .openPopup();

        // Show nearby services
        services.forEach((s) => {
          const d = distance(clat, clng, s.lat, s.lng);
          if (d <= RADIUS_KM) {
            const m = L.marker([s.lat, s.lng], { icon: serviceIcon })
              .addTo(map)
              .bindPopup(`<b>${s.name}</b><br>${d.toFixed(1)} km away`);
            markers.push(m);
          }
        });
      }

      /* ================= DISTANCE ================= */
      function distance(lat1, lng1, lat2, lng2) {
        const R = 6371;
        const dLat = rad(lat2 - lat1);
        const dLng = rad(lng2 - lng1);
        const a =
          Math.sin(dLat / 2) ** 2 +
          Math.cos(rad(lat1)) * Math.cos(rad(lat2)) * Math.sin(dLng / 2) ** 2;
        return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      }
      const rad = (d) => (d * Math.PI) / 180;
    </script>
  </body>
</html>
